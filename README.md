# Flex & Bison

Flex = Lexical Analyzer Generator

Bison = Parser Generator

Flex와 Bison은 컴파일러와 인터프리터 개발에 도움을 주는 도구들로서 주로 프로그래밍 언어나 도메인 특정 언어를 파싱(문법 분석)하는 데 사용됩니다.

**Flex(Fast Lexical Analyzer Generator)**

Flex는 텍스트 기반의 입력을 읽어 들여 **미리 정의된 토큰들을 인식하는 렉서를 생성하는 도구** 입니다. 렉서는 입력된 문자열을 토큰으로 분리하고, 이 토큰들을 컴파일러나 인터프리터에서 사용할 수 있는 형태로 반환하는 역할을 합니다. 토큰은 언어의 키워드, 식별자, 상수, 연산자 등과 같은 기본적인 구성 요소들을 나타내는데 사용됩니다.

**Bison(GNU Bison)**

Bison은 **구문 분석기**로서, 프로그래밍 언어의 문법을 기반으로 하여 입력된 토큰들을 프로그램의 구문규칙에 따라 분석하고, 이를 추상 구문 트리나 다른 중간 표현으로 변환하는 도구입니다. **즉, Bison은 문법을 기반으로 구문 분석 파서를 생성합니다.** 이러한 파서는 언어의 구문 규칙을 이해하고 해석하여 문장의 구조를 파악하는데 사용됩니다.

주로 프로그래밍 언어의 컴파일러나 인터프리터 개발에 사용되며, 복잡한 문법을 가진 언어를 구문 분석하기 위해 활용됩니다.

%{…….%} : 이 부분은 Flex의 옵션과 초기화 코드를 정의하는 섹션입니다. 이 코드 블록 안에서 변수를 선언하고 초기화 합니다.

%% 섹션 : %%섹션은 Flex 렉서 파일의 본문 부분을 정의하는 섹션입니다. 이 섹션에서는 입력 토큰에 대한 규칙들을 정의합니다.

\n{…….} 규칙: 개행 문자가 입력으로 들어올 때 해당 블록안의 코드가 실행 됩니다.

. 규칙: 위에서 정의된 규칙에 해당하지 않는 경우 모든 문자에 대해 해당 블록 안의 코드가 실행 됩니다.

**yylex**는 **Flex 렉서로부터 생성된 C 코드 내에서 호출되는 함수의 이름**입니다.

**Flex 렉서 파일은 입력 텍스트를 분석하고, 사전에 정의된 토큰 규칙에 따라 텍스트를 토큰들로 분리하는 역할**을 합니다. 이렇게 분리된 토큰들은 보통 파싱 과정에서 사용되거나 어플리케이션에서 처리됩니다. Flex 렉서를 사용하여 C 언어의 렉서를 구현할 때, Flex는 입력 텍스트를 읽고 토큰으로 분리하는 C 코드를 생성합니다. 이때 yylex라는 이름의 함수가 생성되며, 이 함수는 실제로 텍스트를 읽고 토큰들을 반환합니다. C 언어의 main 함수나 다른 함수에서 yylex 함수를 호출하여 렉서를 실행합니다.

일반적으로 **yylex 함수의 호출은 렉서가 한 번 호출될 때마다 하나의 토큰을 읽고 반환하는 방식**으로 동작합니다. 렉서는 일반적으로 **루프를 사용**하여 **입력 텍스트의 끝까지 계속해서 토큰을 읽고 반환**하게 됩니다

lex.yy.c는 Flex렉서를 사용하여 소스 코드를 분석하여 생성된 C 언어 파일입니다.

Flex 렉서파일은(.l 또는 .lex 확장자로 끝나는 파일)은 입력 텍스트를 읽고, 정의된 토큰 규칙에 따라 텍스트를 토큰들로 분리하는 규칙들을 포함합니다. Flex 렉서는 이러한 렉서 파일을 입력으로 받아서 C 코드로 변환 합니다.

Flex가 렉서 파일을 처리하면서 토큰 규칙들을 분석하고 C 코드를 생성하게 되는데, 이 때 생성된 C 코드 파일의 기본 이름은 lex.yy.c입니다. 즉, 렉서 파일을 컴파일 하여 생성된 C 소스 코드를 담고 있는 파일입니다. 일반적으로 Flex 렉서 파일을 다음과 같이 사용하고 컴파일 합니다.

1. Flex 렉서 파일 생성 : .l .lex 확장자로 끝나는 파일을 작성하여 Flex 렉서 파일을 생성합니다.
2. Flex 컴파일 : Flex 가 설치된 환경에서 다음과 같은 명령을 사용하여 Flex 렉서 파일을 컴파일하면 lex.yy.c 파일이 생성됩니다.
    
    **flex lex_file.l**
    
3. C 코드 컴파일 : 생성된 lex.yy.c 파일을 C 컴파일러를 사용하여 컴파일 합니다.
    
    **gcc lex.yy.c -o lexer_program**
    

이렇게 컴파일된 프로그램은 입력으로 주어진 텍스트를 Flex 렉서 파일에서 정의한 규칙에 따라 분석하고, 토큰들을 반환하거나 다른 동작을 수행하게 됩니다.

gcc lex.yy.c -o lexer_program 명령은 Flex를 사용하여 생성된 lex.yy.c 파일을 컴파일 하여 실행 파일elxer_program을 생성하는 명령어 입니다. 간단히 말해, lex.yy.c파일에 담긴 Flex 렉서를 C 코드로 변환하여 컴파일하여 실행 가능한 프로그램을 만드는 것입니다.

여기서 -o 옵션은 출력 파일의 이름을 지정하는 역할을 합니다.
.y 파일과 .l 파일은 각각 Yacc (Yet Another Compiler Compiler)와 Flex (Fast Lexical Analyzer Generator)에서 사용되는 파일 확장자입니다.

**.y 파일** (Yacc 파일):

.y 파일은 Yacc (또는 Bison)의 입력 파일로 사용됩니다.
Yacc는 **문법 규칙을 기반으로 소스 코드를 구문 분석하고 파싱하는 도구**입니다. Yacc 파일에는 문법 규칙들이 포함되어 있으며, 이 규칙들은 **입력 코드를 추상 구문 트리(abstract syntax tree) 또는 중간 코드로 변환하는 역할**을 합니다.
Yacc 파일에는 언어의 **문법과 구문 규칙들을 기술**하고, 이를 바탕으로 

### **구문 분석 파서**를 생성합니다.

**.l 파일** (Flex 파일):

.l 파일은 **Flex의 입력 파일로 사용**됩니다.
Flex는 입력 텍스트를 읽어들여 **미리 정의된 토큰들을 인식하는 렉서를 생성하는 도구**입니다. **.l 파일에는 입력 텍스트를 토큰으로 분리하는 규칙들이 포함**되어 있습니다.
Flex 파일에는 **언어의 키워드, 식별자, 상수, 연산자 등과 같은 토큰 들을 정의하고, 이를 인식하는 렉서 코드를 생성**합니다.
주로 컴파일러나 **인터프리터 개발에 사용**되며, .y 파일과 .l 파일이 함께 사용되는 경우가 많습니다. 

예를 들어, 프로그래밍 언어의 컴파일러를 구현할 때, .y 파일에 **문법 규칙을 기술하여 파서를 생성하고, .l 파일에 토큰들을 정의하여 렉서를 생성**합니다. 이렇게 생성된 파서와 렉서를 함께 사용하여 소스 코드를 **구문 분석하고, 문법에 맞게 처리하는 등의 작업을 수행**합니다.
